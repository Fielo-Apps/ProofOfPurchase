function upgradeCKEditor(){if("undefined"!=typeof CKEDITOR)for(var e in CKEDITOR.instances){var t=CKEDITOR.instances[e].name;CKEDITOR.instances[t].on("instanceReady",function(){CKEDITOR.instances[t].destroy(),CKEDITOR.replace(t,{baseHref:protocolAndHost+"/ckeditor/ckeditor-4.x/rel/",customConfig:"sfdc-config.js?t=4.5.3.3",height:"425",sfdcLabels:{CkeMediaEmbed:{title:"Embed Multimedia Content",description:"Use &lt;iframe&gt; code from DailyMotion, Vimeo, and Youtube.",subtitle:"Paste &amp;lt;iframe&amp;gt; code here:",exampleTitle:"Example:",example:"\n\n&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/KcOm0TNvKBA&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;\n\n",iframeMissing:"Invalid &lt;iframe&gt; element. Please use valid code from the approved sites."},sfdcSwitchToText:{sfdcSwitchToTextAlt:"Use plain text"},CkeImageDialog:{uploadTab:"Upload Image",infoTab_url:"URL",error:"Error:",uploadTab_desc_info:"Enter a description of the image for visually impaired users",uploadTab_desc:"Description",infoTab_url_info:"Example: http://www.mysite.com/myimage.jpg",btn_insert:"Insert",defaultImageDescription:"User-added image",missingUrlError:"You must enter a URL",uploadTab_file:"Select Image",infoTab_desc:"Description",btn_upadte:"Update",wrongFileTypeError:"You can insert only .gif .jpeg and .png files.",btn_update_tooltip:"Update Image",infoTab:"Web Address",btn_insert_tooltip:"Insert Image",title:"Insert Image",infoTab_desc_info:"Enter a description of the image for visually impaired users",imageUploadLimit_info:"Max number of upload images exceeded",uploadTab_file_info:"Maximum size 1 MB. Only png, gif or jpeg",btn_update:"Update"},CkeImagePaste:{CkeImagePasteWarning:"Pasting an image is not working properly with Firefox, please use [Copy Image location] instead."}},disableNativeSpellChecker:!0,language:"en-us",sharedSpaces:{top:"cke_topSpace",bottom:" cke_bottomSpace"},filebrowserImageUploadUrl:"/_ui/common/request/servlet/RtaImageUploadServlet",toolbarCanCollapse:!0,resize_enabled:!0,enterMode:CKEDITOR.ENTER_BR,shiftEnterMode:CKEDITOR.ENTER_P,forcePasteAsPlainText:!0,forceSimpleAmpersand:!1,pasteFromWordRemoveFontStyles:!0,pasteFromWordRemoveStyles:!0,imageUploadAllowedExtensions:".(jpg|gif|jpeg|png|bmp|jfif|jpe|pjpeg)$",imageUploadDeniedExtensions:"",extraAllowedContent:["div{*}(*); span{*}(*); p{*}(*); br{*}(*); hr{*}(*);","iframe{*}(*);","h1{*}(*); h2{*}(*); h3{*}(*); h4{*}(*); h5{*}(*); h6{*}(*);","a[*]{*}(*);","img[!src,alt,width,height,border]{*}(*);","font[face,size,color];","strike; s; b; em; strong; i; big; small; sub; sup; blockquote; ins; kbd; pre{*}(*); tt;","abbr; acronym; address; bdo; caption; cite; code; col; colgroup;","dd; del; dfn; dl; dt; q; samp; var;","table{*}(*)[align,border,cellpadding,cellspacing,summary];","caption{*}(*); tbody{*}(*); thead{*}(*); tfoot{*}(*);","th{*}(*)[scope,colspan,rowspan,align,valign]; tr{*}(*)[align,valign]; td{*}(*)[scope,colspan,rowspan,align,valign];"],coreStyles_strike:{element:"strike"},coreStyles_bold:{element:"b"},coreStyles_italic:{element:"i"},toolbar_Full:[{name:"document",items:["Source","-","Save","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},"/",{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["sfdcImage","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"]},"/",{name:"styles",items:["Format","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize"]}],toolbar:"Full",removePlugins:"elementspath, image",extraPlugins:"sfdcImage,sfdcMediaEmbed,sfdcSmartLink,sfdcCodeBlock,sfdcTable,sfdcVfAjax4J",removeDialogTabs:"",plugins:"about,a11yhelp,basicstyles,bidi,blockquote,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,floatingspace,font,format,forms,horizontalrule,htmlwriter,image,iframe,indentlist,indentblock,justify,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastefromword,pastetext,preview,print,removeformat,resize,save,selectall,showblocks,showborders,smiley,sourcearea,specialchar,stylescombo,tab,table,tabletools,templates,toolbar,undo,wysiwygarea"})})}}Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1),t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())},Date.prototype.isDst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()},/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var s,i=arguments.length;for(s=0;s<i;s++)e=arguments[s],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:s.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",s="prototype",i=e.Element[s],n=Object,o=String[s].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[s].indexOf||function(e){for(var t=0,s=this.length;t<s;t++)if(t in this&&this[t]===e)return t;return-1},l=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},r=function(e,t){if(""===t)throw new l("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new l("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},h=function(e){for(var t=o.call(e.getAttribute("class")||""),s=t?t.split(/\s+/):[],i=0,n=s.length;i<n;i++)this.push(s[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=h[s]=[],_=function(){return new h(this)};if(l[s]=Error[s],c.item=function(e){return this[e]||null},c.contains=function(e){return e=String(e),r(this,e)!==-1},c.add=function(){var e,t=arguments,s=0,i=t.length,n=!1;do e=String(t[s]),r(this,e)===-1&&(this.push(e),n=!0);while(++s<i);n&&this._updateClassName()},c.remove=function(){var e,t,s=arguments,i=0,n=s.length,o=!1;do for(e=String(s[i]),t=r(this,e);t!==-1;)this.splice(t,1),o=!0,t=r(this,e);while(++i<n);o&&this._updateClassName()},c.toggle=function(e,t){e=String(e);var s=this.contains(e),i=s?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!s},c.toString=function(){return this.join(" ")},n.defineProperty){var d={get:_,enumerable:!0,configurable:!0};try{n.defineProperty(i,t,d)}catch(u){u.number===-2146823252&&(d.enumerable=!1,n.defineProperty(i,t,d))}}else n[s].__defineGetter__&&i.__defineGetter__(t,_)}}(self)),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Object.assign&&(Object.assign=function(e,t){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!==n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(s[o]=n[o])}return s}),!function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.svg4everybody=t()}):"object"==typeof module&&module.exports?module.exports=t():e.svg4everybody=t()}(this,function(){function e(e,t,s){if(s){var i=document.createDocumentFragment(),n=!t.hasAttribute("viewBox")&&s.getAttribute("viewBox");n&&t.setAttribute("viewBox",n);for(var o=s.cloneNode(!0);o.childNodes.length;)i.appendChild(o.firstChild);e.appendChild(i)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var s=t._cachedDocument;s||(s=t._cachedDocument=document.implementation.createHTMLDocument(""),s.body.innerHTML=t.responseText,t._cachedTarget={}),t._embeds.splice(0).map(function(i){var n=t._cachedTarget[i.id];n||(n=t._cachedTarget[i.id]=s.getElementById(i.id)),e(i.parent,i.svg,n)})}},t.onreadystatechange()}function s(s){function n(){for(var s=0;s<p.length;){var l=p[s],r=l.parentNode,h=i(r);if(h){var c=l.getAttribute("xlink:href")||l.getAttribute("href");if(o)if(!a.validate||a.validate(c,h,l)){r.removeChild(l);var _=c.split("#"),f=_.shift(),C=_.join("#");if(f.length){var E=d[f];E||(E=d[f]=new XMLHttpRequest,E.open("GET",f),E.send(),E._embeds=[]),E._embeds.push({parent:r,svg:h,id:C}),t(E)}else e(r,h,document.getElementById(C))}else++s,++m}else++s}(!p.length||p.length-m>0)&&u(n,67)}var o,a=Object(s),l=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,r=/\bAppleWebKit\/(\d+)\b/,h=/\bEdge\/12\.(\d+)\b/,c=/\bEdge\/.(\d+)\b/,_=window.top!==window.self;o="polyfill"in a?a.polyfill:l.test(navigator.userAgent)||(navigator.userAgent.match(h)||[])[1]<10547||(navigator.userAgent.match(r)||[])[1]<537||c.test(navigator.userAgent)&&_;var d={},u=window.requestAnimationFrame||setTimeout,p=document.getElementsByTagName("use"),m=0;o&&n()}function i(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return s}),0===BackEndJSSettings.LOCALE.indexOf(BackEndJSSettings.LANGUAGE+"_")?moment.locale([BackEndJSSettings.LOCALE,BackEndJSSettings.LANGUAGE,"en"]):moment.locale([BackEndJSSettings.LANGUAGE,"en"]),"function"==typeof $.aljsInit&&$.aljsInit({assetsLocation:BackEndJSSettings.RESOURCE.BACKEND+"/lightning",scoped:!0});var fielo=function(){"use strict";return{util:{getObjectValue:function(e,t){return e.hasOwnProperty(t[0])?t.length>1?"object"==typeof e[t[0]]?this.getObjectValue(e[t.shift()],t):void 0:e[t[0]]:""},getParentUntil:function(e,t){var s,i=t.charAt(0);switch(i){case".":for(s=t.substr(1);e&&e!==document;e=e.parentNode)if(e.classList.contains(s))return e;break;case"#":for(s=t.substr(1);e&&e!==document;e=e.parentNode)if(e.id===s)return e;break;case"[":s=t.substr(1,t.length-2).split("=");var n=s[0].trim();if(1===s.length){for(;e&&e!==document;e=e.parentNode)if(e.hasAttribute(n))return e}else if(2===s.length){var o=!1,a=s[1].trim();for("~"===n.substr(n.length-1,1)&&(n=n.substr(0,n.length-1),o=!0);e&&e!==document;e=e.parentNode)if(e.hasAttribute(n)){var l=e.getAttribute(n);if(l===a||o===!0&&l.indexOf(a)>=0)return e}}else console.log("Invalid selector:"+t);break;default:for(;e&&e!==document;e=e.parentNode)if(e.tagName.toLowerCase()===t)return e}return!1},registered_:[],unescapeJsInHtml:function(e){return e&&e.replace&&(e=e.replace(/\\\\/g,"\\"),e=e.replace(/\\'/g,"'"),e=e.replace(/\\n/g,"\n"),e=e.replace(/\\&#39;/g,"'"),e=e.replace(/&#39;/g,"'"),e=e.replace(/&quot;/g,'"')),e},parseDateFromSF:function(e){if(e&&""!==e)if("number"==typeof e&&(e=e.toString()),e.match("[0-9]{10,13}")&&e.match("^[0-9]*$"))e=Number(e);else if(e.indexOf("GMT")===-1){var t=e.split(" ")[0],s=[],i=[];if("undefined"!=typeof e.split(" ")[1]&&(s=e.split(" ")[1].split(":")),e.indexOf("/")===-1)t=t.split("-"),i.push(Number(t[0])),i.push(Number(t[1]-1)),i.push(Number(t[2])),s&&(i.push(Number(s[0])),i.push(Number(s[1])),i.push(Number(s[2])));else{t=t.split("/");var n,o,a,l=BackEndJSSettings.DATE_FORMAT.split("/");0===l[0].toLowerCase().indexOf("y")?n=0:0===l[0].toLowerCase().indexOf("m")?o=0:a=0,0===l[1].toLowerCase().indexOf("y")?n=1:0===l[1].toLowerCase().indexOf("m")?o=1:a=1,0===l[2].toLowerCase().indexOf("y")?n=2:0===l[2].toLowerCase().indexOf("m")?o=2:a=2,i.push(Number(t[n])),i.push(Number(t[o]-1)),i.push(Number(t[a])),s&&(i.push(Number(s[0])),i.push(Number(s[1])))}e=Date.UTC.apply(null,i)}else e=new Date(e).valueOf();return e},parseDateToSF:function(e){return e&&""!==e&&(e=new Date(e),e=new Date(e.valueOf()-6e4*e.getTimezoneOffset()).valueOf()),e},formatDate:function(){BackEndJSSettings.DATE_FORMAT=BackEndJSSettings.DATE_FORMAT.replace(/^d\//g,"dd/").replace(/\/d\//g,"/dd/").replace(/\/d$/g,"/dd").replace(/d/g,"D").replace(/^yy\//g,"yyyy/").replace(/\/yy\//g,"/yyyy/").replace(/\/yy$/g,"/yyyy").replace(/y/g,"Y"),BackEndJSSettings.DATETIME_FORMAT=BackEndJSSettings.DATETIME_FORMAT.replace(/^d\//g,"dd/").replace(/\/d\//g,"/dd/").replace(/\/d+\s/g,"/dd ").replace(/d/g,"D").replace(/^yy\//g,"yyyy/").replace(/\/yy\//g,"/yyyy/").replace(/\/yy+\s/g,"/yyyy ").replace(/y/g,"Y")},escapeHTML:function(e){return e&&e.replace&&(e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;")),e},unescapeHTML:function(e){var t=[{key:"&amp;",value:"&"},{key:"&gt;",value:">"},{key:"&quot;",value:"'"}];return e&&e.replace&&t.forEach(function(t){var s=new RegExp(t.key,"g");e=e.replace(s,t.value)}),e},register:function(e){fielo.util.registered_.push(e)},init:function(){fielo.util.registered_.forEach(function(e){componentHandler.register(e)})},backdrop:document.getElementsByClassName("slds-backdrop")[0],modalShow:function(e,t){var s=document.getElementById(e.id);null!==s.getAttribute("data-on-show")&&window[s.getAttribute("data-on-show")](s,t)}},helper:{registered_:[],register:function(e){fielo.helper.registered_[e.classAsString]=e},init:function(e){e.forEach(function(e){componentHandler.register(fielo.helper.registered_[e])})}}}}();window.fielo=fielo,window.addEventListener("load",function(){"use strict";svg4everybody(),fielo.util.formatDate(),fielo.util.createSpinner(),fielo.util.notify.createContainer(),$("body").modal({selector:'[data-aljs="modal"]',onShow:fielo.util.modalShow})});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var componentHandler={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};componentHandler=function(){"use strict";function e(e,t){for(var s=0;s<_.length;s++)if(_[s].className===e)return"undefined"!=typeof t&&(_[s]=t),_[s];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function s(e,s){var i=t(e);return i.indexOf(s)!==-1}function i(t,s){if("undefined"==typeof t&&"undefined"==typeof s)for(var o=0;o<_.length;o++)i(_[o].className,_[o].cssClass);else{var a=t;if("undefined"==typeof s){var l=e(a);l&&(s=l.cssClass)}for(var r=document.querySelectorAll("."+s),h=0;h<r.length;h++)n(r[h],a)}}function n(i,n){if(!("object"==typeof i&&i instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var o=t(i),a=[];if(n)s(i,n)||a.push(e(n));else{var l=i.classList;_.forEach(function(e){l.contains(e.cssClass)&&a.indexOf(e)===-1&&!s(i,e.className)&&a.push(e)})}for(var r,h=0,c=a.length;h<c;h++){if(r=a[h],!r)throw new Error("Unable to find a registered component for the given class.");o.push(r.className),i.setAttribute("data-upgraded",o.join(","));var p=new r.classConstructor(i);p[u]=r,d.push(p);for(var m=0,f=r.callbacks.length;m<f;m++)r.callbacks[m](i);r.widget&&(i[r.className]=p);var C=document.createEvent("Events");C.initEvent("mdl-componentupgraded",!0,!0),i.dispatchEvent(C)}}function o(e){Array.isArray(e)||(e="function"==typeof e.item?Array.prototype.slice.call(e):[e]);for(var t,s=0,i=e.length;s<i;s++)t=e[s],t instanceof HTMLElement&&(n(t),t.children.length>0&&o(t.children))}function a(t){var s="undefined"==typeof t.widget&&"undefined"==typeof t.widget,i=!0;s||(i=t.widget||t.widget);var n={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:i,callbacks:[]};if(_.forEach(function(e){if(e.cssClass===n.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===n.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(u))throw new Error("MDL component classes must not have "+u+" defined as a property.");var o=e(t.classAsString,n);o||_.push(n)}function l(t,s){var i=e(t);i&&i.callbacks.push(s)}function r(){fielo.util.init();for(var e=0;e<_.length;e++)i(_[e].className)}function h(e){var t=d.indexOf(e);d.splice(t,1);var s=e.element_.getAttribute("data-upgraded").split(","),i=s.indexOf(e[u].classAsString);s.splice(i,1),e.element_.setAttribute("data-upgraded",s.join(","));var n=document.createEvent("Events");n.initEvent("mdl-componentdowngraded",!0,!0),e.element_.dispatchEvent(n)}function c(e){var t=function(e){d.filter(function(t){return t.element_===e}).forEach(h)};if(e instanceof Array||e instanceof NodeList)for(var s=0;s<e.length;s++)t(e[s]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}var _=[],d=[],u="mdlComponentConfigInternal_";return{upgradeDom:i,upgradeElement:n,upgradeElements:o,upgradeAllRegistered:r,registerUpgradedCallback:l,register:a,downgradeElements:c}}(),componentHandler.ComponentConfigPublic,componentHandler.ComponentConfig,componentHandler.Component,componentHandler.upgradeDom=componentHandler.upgradeDom,componentHandler.upgradeElement=componentHandler.upgradeElement,componentHandler.upgradeElements=componentHandler.upgradeElements,componentHandler.upgradeAllRegistered=componentHandler.upgradeAllRegistered,componentHandler.registerUpgradedCallback=componentHandler.registerUpgradedCallback,componentHandler.register=componentHandler.register,componentHandler.downgradeElements=componentHandler.downgradeElements,window.componentHandler=componentHandler,window.componentHandler=componentHandler,window.addEventListener("load",function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),componentHandler.upgradeAllRegistered()):(componentHandler.upgradeElement=function(){},componentHandler.register=function(){})}),window.fielo.util.upgradeCKEditor=upgradeCKEditor,function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloPhotoUpload=e,e.prototype.Constant_={DATA_EXTERNAL_URL_NAME:"data-externalUrlName",DATA_FIELD_NAME:"data-field-name",DATA_FOLDER_ID:"data-folder-id",DATA_RECORD:"data-record",DATA_RECORD_NAME:"data-record-name",DATA_SOBJECT_NAME:"data-sobject-name",DELETE_CONTROLLER:BackEndJSSettings.RESOURCE.NAMESPACE+"PhotoUploadController.remove",SAVE_CONTROLLER:BackEndJSSettings.RESOURCE.NAMESPACE+"PhotoUploadController.save"},e.prototype.CssClasses_={CANCEL:"slds-button--cancel",CONTAINER:"fielosf-recent-records__container",CROPPER:"fielosf-cropper",DELETE:"slds-button--delete",DOCUMENT:"slds-button--document",DOCUMENT_PICKLIST:"fielosf-document-picklist",EDIT:"slds-button--edit",EXTERNAL_BTN:"slds-button--url",EXTERNAL_INPUT:"fielosf-external-url",EXTERNAL_LINK:"fielosf-external-link",FIELD:"fielosf-output",HIDE:"slds-hide",IMAGE:"",INPUT_FILE:"fielosf-input-file",MODEL:"fielosf-recent-records__model",PREVIEW:"slds-button--preview",RECORD_IMG:"fielosf-recordImg",REPLACE:"slds-button--replace",SAVE:"slds-button--save",UPLOAD_BTN:"slds-button--upload"},e.prototype.uploadFile_=function(){fielo.util.spinner.FieloSpinner.show();var e=this.isEdit_?this.recordImg_:this.cropperImage_,t="",s={};s.Id=this.record_,s.Name=this.recordName_,"external"===this.status_?(t="",s[this.dataExternalURL_]=this.externalInput_.value,s[this.fieldName_]=""):"existing"===this.status?(t="",s[this.dataExternalURL_]="",s[this.fieldName_]=this.documentPicklist_.get("value")):(t=$(e).cropper("getCroppedCanvas").toDataURL(this.imageType_),s[this.dataExternalURL_]="",this.documentPicklist_&&(s[this.fieldName_]=this.documentPicklist_.get("value")));try{Visualforce.remoting.Manager.invokeAction(this.Constant_.SAVE_CONTROLLER,s,this.folderId_,this.objectName_,this.fieldName_,this.dataExternalURL_,this.status_,t,this.processRemoteActionResult_.bind(this),{escape:!1})}catch(i){console.warn(i)}},e.prototype.deleteFile_=function(){fielo.util.spinner.FieloSpinner.show();var e={};e.Id=this.record_;try{Visualforce.remoting.Manager.invokeAction(this.Constant_.DELETE_CONTROLLER,e,this.fieldName_,this.dataExternalURL_,this.processRemoteActionResult_.bind(this),{escape:!1})}catch(t){console.warn(t)}},e.prototype.processRemoteActionResult_=function(e){var t=fielo.util.notify.create();t.FieloNotify.addMessages([e.messages[0].summary]);var s="Error"===e.messages[0].severity?"Error":"Success";t.FieloNotify.setTheme(s),t.FieloNotify.show(),"Error"!==s&&this.refresh_(),fielo.util.spinner.FieloSpinner.hide()},e.prototype.refresh_=function(){location.reload()},e.prototype.initCropper_=function(e){$(e).cropper({rotatable:!1,zoomable:!1})},e.prototype.destroyCropper_=function(e){$(e).cropper("destroy")},e.prototype.loadImage_=function(e){this.showEditBtns_(!0);var t=e.target.files[0];this.imageType_=t.type;var s="";this.status_="cropped",t?(s=URL.createObjectURL(t),this.cropperImage_.src=s,this.destroyCropper_(this.cropperImage_),this.initCropper_(this.cropperImage_)):(this.status_="",this.destroyCropper_(this.cropperImage_),this.cropperImage_.src=s)},e.prototype.showEditBtns_=function(e){e?(this.preview_.classList.remove(this.CssClasses_.HIDE),this.cancel_.classList.remove(this.CssClasses_.HIDE),this.save_.classList.remove(this.CssClasses_.HIDE),this.upload_.classList.add(this.CssClasses_.HIDE),this.external_.classList.add(this.CssClasses_.HIDE),this.documentPicklist_&&this.document_.classList.add(this.CssClasses_.HIDE)):(this.preview_.classList.add(this.CssClasses_.HIDE),this.cancel_.classList.add(this.CssClasses_.HIDE),this.save_.classList.add(this.CssClasses_.HIDE),this.upload_.classList.remove(this.CssClasses_.HIDE),this.external_.classList.remove(this.CssClasses_.HIDE),this.documentPicklist_&&this.document_.classList.remove(this.CssClasses_.HIDE))},e.prototype.previewImage_=function(){var e=window.open();if("external"===this.status_)e.document.body.innerHTML='<img class="fielosf-js-photoupload__imagePreview" src="'+this.externalInput_.value+'" />';else{var t=this.isEdit_?this.recordImg_:this.cropperImage_;e.document.body.append($(t).cropper("getCroppedCanvas"))}},e.prototype.setListeners_=function(){this.upload_.addEventListener("click",function(){this.fileImage_.click()}.bind(this)),this.fileImage_.addEventListener("change",this.loadImage_.bind(this)),this.external_.addEventListener("click",function(){this.showEditBtns_(!0),this.status_="external",this.externalInput_.classList.remove(this.CssClasses_.HIDE)}.bind(this)),this.preview_.addEventListener("click",this.previewImage_.bind(this)),this.replace_.addEventListener("click",function(){this.status_="",this.isReplace_=!0,this.cancel_.classList.remove(this.CssClasses_.HIDE),this.upload_.classList.remove(this.CssClasses_.HIDE),this.external_.classList.remove(this.CssClasses_.HIDE),this.recordImg_.classList.add(this.CssClasses_.HIDE),this.replace_.classList.add(this.CssClasses_.HIDE),this.delete_.classList.add(this.CssClasses_.HIDE),this.edit_&&this.edit_.classList.add(this.CssClasses_.HIDE),this.externalLink_&&this.externalLink_.classList.add(this.CssClasses_.HIDE)}.bind(this)),this.documentPicklist_&&this.document_.addEventListener("click",function(){this.showEditBtns_(!0),this.status_="existing",this.documentPicklist_.classList.remove(this.CssClasses_.HIDE)}.bind(this)),this.edit_&&this.edit_.addEventListener("click",function(){this.isEdit_=!0,$(this.recordImg_).cropper(),this.showEditBtns_(!0),this.status_="cropped",this.cancel_.classList.remove(this.CssClasses_.HIDE),this.edit_.classList.add(this.CssClasses_.HIDE),this.replace_.classList.add(this.CssClasses_.HIDE),this.delete_.classList.add(this.CssClasses_.HIDE)}.bind(this)),this.save_.addEventListener("click",this.uploadFile_.bind(this)),this.delete_.addEventListener("click",this.deleteFile_.bind(this)),this.cancel_.addEventListener("click",function(){this.isEdit_?(this.destroyCropper_(this.recordImg_),this.replace_.classList.remove(this.CssClasses_.HIDE),this.delete_.classList.remove(this.CssClasses_.HIDE),this.edit_&&this.edit_.classList.remove(this.CssClasses_.HIDE),this.externalLink_&&this.externalLink_.classList.remove(this.CssClasses_.HIDE),this.cancel_.classList.add(this.CssClasses_.HIDE),this.preview_.classList.add(this.CssClasses_.HIDE),this.save_.classList.add(this.CssClasses_.HIDE),this.isEdit_=!1):this.isReplace_?""===this.status_?(this.recordImg_.classList.remove(this.CssClasses_.HIDE),this.replace_.classList.remove(this.CssClasses_.HIDE),this.delete_.classList.remove(this.CssClasses_.HIDE),this.edit_&&this.edit_.classList.remove(this.CssClasses_.HIDE),this.externalLink_&&this.externalLink_.classList.remove(this.CssClasses_.HIDE),this.cancel_.classList.add(this.CssClasses_.HIDE),this.upload_.classList.add(this.CssClasses_.HIDE),this.external_.classList.add(this.CssClasses_.HIDE)):"external"===this.status_?(this.externalInput_.classList.add(this.CssClasses_.HIDE),this.showEditBtns_(!1),this.cancel_.classList.remove(this.CssClasses_.HIDE)):"existing"===this.status_?(this.documentPicklist_.classList.add(this.CssClasses_.HIDE),this.showEditBtns_(!1),this.cancel_.classList.remove(this.CssClasses_.HIDE)):(this.destroyCropper_(this.cropperImage_),this.cropperImage_.src="",this.showEditBtns_(!1),this.cancel_.classList.remove(this.CssClasses_.HIDE)):"external"===this.status_?(this.externalInput_.classList.add(this.CssClasses_.HIDE),this.showEditBtns_(!1)):(this.destroyCropper_(this.cropperImage_),this.cropperImage_.src="",this.showEditBtns_(!1)),this.status_=""}.bind(this))},e.prototype.init=function(){this.element_&&(this.record_=this.element_.getAttribute(this.Constant_.DATA_RECORD),this.recordName_=this.element_.getAttribute(this.Constant_.DATA_RECORD_NAME),this.objectName_=this.element_.getAttribute(this.Constant_.DATA_SOBJECT_NAME),this.folderId_=this.element_.getAttribute(this.Constant_.DATA_FOLDER_ID),this.fieldName_=this.element_.getAttribute(this.Constant_.DATA_FIELD_NAME),this.dataExternalURL_=this.element_.getAttribute(this.Constant_.DATA_EXTERNAL_URL_NAME),this.status_="",this.isReplace_=!1,this.isEdit_=!1,this.newImage_=this.element_.getElementsByClassName(this.CssClasses_.IMAGE)[0],this.fileImage_=this.element_.getElementsByClassName(this.CssClasses_.INPUT_FILE)[0],this.cropperImage_=this.element_.getElementsByClassName(this.CssClasses_.CROPPER)[0],this.upload_=this.element_.getElementsByClassName(this.CssClasses_.UPLOAD_BTN)[0],this.external_=this.element_.getElementsByClassName(this.CssClasses_.EXTERNAL_BTN)[0],this.preview_=this.element_.getElementsByClassName(this.CssClasses_.PREVIEW)[0],this.cancel_=this.element_.getElementsByClassName(this.CssClasses_.CANCEL)[0],this.replace_=this.element_.getElementsByClassName(this.CssClasses_.REPLACE)[0],this.document_=this.element_.getElementsByClassName(this.CssClasses_.DOCUMENT)[0],this.save_=this.element_.getElementsByClassName(this.CssClasses_.SAVE)[0],this.delete_=this.element_.getElementsByClassName(this.CssClasses_.DELETE)[0],this.edit_=this.element_.getElementsByClassName(this.CssClasses_.EDIT)[0],this.externalInput_=this.element_.getElementsByClassName(this.CssClasses_.EXTERNAL_INPUT)[0],this.externalLink_=this.element_.getElementsByClassName(this.CssClasses_.EXTERNAL_LINK)[0]||null,this.documentPicklist_=this.element_.getElementsByClassName(this.CssClasses_.DOCUMENT_PICKLIST)[0],this.recordImg_=this.element_.getElementsByClassName(this.CssClasses_.RECORD_IMG)[0],this.documentPicklist_&&this.document_.classList.remove(this.CssClasses_.HIDE),this.setListeners_())},fielo.helper.register({constructor:e,classAsString:"FieloPhotoUpload",cssClass:"fielosf-photo-upload",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloNotify=e,e.prototype.Constant_={},e.prototype.CssClasses_={CLOSE:"slds-notify__close",BACK:"fielosf-notify__back",CONTINUE:"fielosf-notify__continue",MESSAGE:"fielosf-notify__message",ICON:"fielosf-notify__icon",TYPE_ALERT:"slds-notify--alert",TYPE_TOAST:"slds-notify--toast",THEME_SUCCESS:"slds-theme--success",THEME_ERROR:"slds-theme--error",THEME_OFFLINE:"slds-theme--offline"},e.prototype.show=function(e,t){if("undefined"==typeof e?(this.container_=fielo.util.notify.container,this.setType("toast")):this.container_=e,this.container_.appendChild(this.element_),"undefined"==typeof t&&(t=!0),t){var s;switch(this.theme_){case this.CssClasses_.THEME_SUCCESS:s=5e3;break;case this.CssClasses_.THEME_ERROR:s=1e4;break;case this.CssClasses_.THEME_OFFLINE:s=1e4;break;default:s=1e4}setTimeout(function(){this.hide()}.bind(this),s)}},e.prototype.hide=function(){this.element_.remove()},e.prototype.addMessages=function(e){e.forEach(function(t,s){null===t&&e.splice(s,1)}),this.messageContainer_.innerHTML=fielo.util.unescapeHTML(fielo.util.escapeHTML(e.join("<br/>")))},e.prototype.setTheme=function(e){switch(this.element_.classList.remove(this.CssClasses_.THEME_SUCCESS,this.CssClasses_.THEME_ERROR,this.CssClasses_.THEME_OFFLINE),e.toLowerCase()){case"success":case"info":case"confirm":e=this.CssClasses_.THEME_SUCCESS;break;case"error":e=this.CssClasses_.THEME_ERROR;break;case"offline":default:e=this.CssClasses_.THEME_OFFLINE}this.theme_=e,this.element_.classList.add(e)},e.prototype.setType=function(e){switch(this.element_.classList.remove(this.CssClasses_.TYPE_TOAST,this.CssClasses_.TYPE_ALERT),e.toLowerCase()){case"toast":e=this.CssClasses_.TYPE_TOAST;break;case"alert":e=this.CssClasses_.TYPE_ALERT;break;default:e=this.CssClasses_.TYPE_TOAST}this.element_.classList.add(e)},e.prototype.setIcon=function(e){this.iconContainer_&&this.iconContainer_.setAttribute("xlink:href",e)},e.prototype.init=function(){this.element_&&(this.btnClose_=this.element_.querySelector("."+this.CssClasses_.CLOSE),this.btnBack_=this.element_.querySelector("."+this.CssClasses_.BACK),this.btnContinue_=this.element_.querySelector("."+this.CssClasses_.CONTINUE),this.messageContainer_=this.element_.querySelector("."+this.CssClasses_.MESSAGE),this.iconContainer_=this.element_.querySelector("."+this.CssClasses_.ICON),this.btnClose_&&this.btnClose_.addEventListener("click",this.hide.bind(this)),this.setIcon(BackEndJSSettings.RESOURCE.BACKEND+"/lightning/icons/utility-sprite/svg/symbols.svg#close"),this.setType(this.CssClasses_.TYPE_ALERT))},fielo.util.register({constructor:e,classAsString:"FieloNotify",cssClass:"slds-notify",widget:!0}),window.fielo.util.notify={createContainer:function(){var e=document.createElement("div");e.setAttribute("class","slds-notify_container slds-notify_container--main"),document.getElementsByClassName("fielosf")[0].appendChild(e),window.fielo.util.notify.container=e},create:function(){var e=document.createElement("div");return e.classList.add("slds-notify"),e.innerHTML='<button class="slds-button slds-notify__close slds-button--icon-inverse" title="'+BackEndJSSettings.LABELS.Close+'"><svg aria-hidden="true" class="slds-button__icon"><use class="fielosf-notify__icon" xlink:href=""></use></svg><span class="slds-assistive-text">'+BackEndJSSettings.LABELS.Close+'</span></button><div class="fielosf-notify__message"></div>',componentHandler.upgradeElement(e),e}}}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloFormElement=e,e.prototype.Constant_={COMPONENT_ID:"data-component-id",CONTROLLER_ELEMENT:"data-controller-element",FIELD_ID:"data-field-id",FIELD_LABEL:"data-field-label",FIELD_META:"data-field-meta",FIELD_NAME:"data-field-name",FORM_ID:"data-id",LOOKUP_ITEMS:"data-items",OBJECT_LABEL:"data-object-label",OBJECT_NAME:"data-object-name",OBJECT_PLURAL_LABEL:"data-object-plural-label",ON_CHANGE:"data-on-change",OPTIONS_GETTER:"data-options-getter",OPTIONS:"data-options",PICKLIST_CONTROLLER:"."===BackEndJSSettings.RESOURCE.NAMESPACE?"PicklistController.getRecords":BackEndJSSettings.RESOURCE.NAMESPACE+"PicklistController.getRecords",PICKLIST_CONTROLLER_RECORD:"."===BackEndJSSettings.RESOURCE.NAMESPACE?"PicklistController.getName":BackEndJSSettings.RESOURCE.NAMESPACE+"PicklistController.getName",REQUIRED:"data-required",TYPE:"data-type",VALID_FOR:"data-valid-for",VALUE:"data-value",WHERE_CONDITION:"data-where"},e.prototype.CssClasses_={CONTROL:"slds-form-element__control",CHECKBOX:"slds-checkbox",DATE:"slds-date",DATE_TIME:"slds-datetime",DATE_PICKER:"fielosf-date-picker",DATE_PICKER_FAUX:"fielosf-date-picker--faux",DROPDOWN_LIST:"slds-dropdown__list",DROPDOWN_ITEM:"slds-dropdown__item",VOID_ITEM:"slds-dropdown__item--void",ERROR:"slds-has-error",HAS_ICON:"slds-input-has-icon",HELP:"slds-form-element__help",HIDE:"slds-hide",ICON:"slds-form-element__icon",ICON_LEFT:"slds-input-has-icon--left",ICON_RIGHT:"slds-input-has-icon--right",INPUT:"slds-input",LABEL:"slds-form-element__label",LOOKUP:"slds-lookup__search-input",PICKLIST:"slds-picklist",MULTISELECT:"slds-picklist--draggable",PICKLIST_LABEL:"slds-picklist__label",POP_OVER:"slds-popover",RADIO_GROUP:"slds-radio--button-group",RADIO_LABEL:"slds-radio--button__label",READ_ONLY:"slds-form-element__static",SVG:"slds-button__icon",SELECTED:"slds-is-selected"},e.prototype.setErrorMessage=function(e){this.help_&&(e&&(this.help_.innerHTML=e),this.element_.classList.add(this.CssClasses_.ERROR),this.help_.classList.remove(this.CssClasses_.HIDE))},e.prototype.clean=function(){this.help_&&(this.help_.innerHTML="",this.element_.classList.remove(this.CssClasses_.ERROR),this.help_.classList.add(this.CssClasses_.HIDE))},e.prototype.setIconHover_=function(){this.icon_.addEventListener("mouseover",this.showPopover.bind(this)),this.icon_.addEventListener("mouseout",this.hidePopover.bind(this))},e.prototype.showPopover=function(){this.popover_.style.position="absolute",this.popover_.style.left="7px",this.popover_.style.margin="-1.5rem",this.popover_.style.width="40rem",this.popover_.style.top=this.popover_.offsetHeight-18+"px",this.popover_.classList.remove(this.CssClasses_.HIDE)},e.prototype.hidePopover=function(){this.popover_.classList.add(this.CssClasses_.HIDE)},e.prototype.configDatepicker_=function(){var e=BackEndJSSettings.DATE_FORMAT;switch(this.type_){case"input-datetime":this.input_=this.element_.getElementsByClassName(this.CssClasses_.DATE_TIME)[0],e=BackEndJSSettings.DATETIME_FORMAT;break;default:this.input_=this.element_.getElementsByClassName(this.CssClasses_.DATE)[0]}this.defaultConfig_=this.defaultConfig_||{},this.defaultConfig_.format=e,""!==this.input_.value&&(this.defaultConfig_.initDate=moment(this.input_.value)),this.defaultConfig_.dayLabels=[{full:moment.weekdays()[0],abbr:moment.weekdaysShort()[0]},{full:moment.weekdays()[1],abbr:moment.weekdaysShort()[1]},{full:moment.weekdays()[2],abbr:moment.weekdaysShort()[2]},{full:moment.weekdays()[3],abbr:moment.weekdaysShort()[3]},{full:moment.weekdays()[4],abbr:moment.weekdaysShort()[4]},{full:moment.weekdays()[5],abbr:moment.weekdaysShort()[5]},{full:moment.weekdays()[6],abbr:moment.weekdaysShort()[6]}],this.defaultConfig_.monthLabels=[{full:moment.months()[0],abbr:moment.monthsShort()[0]},{full:moment.months()[1],abbr:moment.monthsShort()[1]},{full:moment.months()[2],abbr:moment.monthsShort()[2]},{full:moment.months()[3],abbr:moment.monthsShort()[3]},{full:moment.months()[4],abbr:moment.monthsShort()[4]},{full:moment.months()[5],abbr:moment.monthsShort()[5]},{full:moment.months()[6],abbr:moment.monthsShort()[6]},{full:moment.months()[7],abbr:moment.monthsShort()[7]},{full:moment.months()[8],abbr:moment.monthsShort()[8]},{full:moment.months()[9],abbr:moment.monthsShort()[9]},{full:moment.months()[10],abbr:moment.monthsShort()[10]},{full:moment.months()[11],abbr:moment.monthsShort()[11]}],this.hiddenPicker_=this.element_.getElementsByClassName(this.CssClasses_.DATE_PICKER)[0],$(this.input_).datepicker(this.defaultConfig_),this.picker_=this.element_.getElementsByClassName(this.CssClasses_.DATE_PICKER_FAUX)[0],this.picker_.addEventListener("click",function(e){e.stopPropagation(),$(this.input_).prev("svg").trigger("click")}.bind(this))},e.prototype.configPicklist_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.PICKLIST)[0],this.elementList_=this.element_.getElementsByClassName(this.CssClasses_.DROPDOWN_LIST)[0],this.elementListItems_=this.elementList_.getElementsByClassName(this.CssClasses_.DROPDOWN_ITEM);var e=0;[].forEach.call(this.elementListItems_,function(t){t.id="option-"+e,e++}),this.voidItem_=this.elementList_.getElementsByClassName(this.CssClasses_.VOID_ITEM)[0],this.label_=this.element_.querySelector("."+this.CssClasses_.PICKLIST_LABEL+" span"),this.labelValue_=String(this.label_.textContent).trim(),this.defaultConfig_={onChange:this.onChange_.bind(this)},$(this.input_).picklist(this.defaultConfig_),this.validFor_&&this.hideItems_()},e.prototype.configMultiselect_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.MULTISELECT)[0];var e={};e.unselectedItems=this.setDataOptions_()||[],e.selectedItems=[],$(this.input_).unbind().removeData();for(var t=this.input_.getElementsByTagName("li");t.length>0;)$(t[0]).remove();$(this.input_).multiSelect(e)},e.prototype.configRadio_=function(){this.input_=null,this.elementListItems_=this.element_.getElementsByTagName("input"),[].forEach.call(this.elementListItems_,function(e){e.addEventListener("change",this.onChange_.bind(this))},this)},e.prototype.configCheckbox_=function(){this.input_=this.element_.getElementsByTagName("input")[0],this.input_.addEventListener("change",this.onChange_.bind(this))},e.prototype.configCheckboxes_=function(){this.elementList_=this.element_.getElementsByClassName(this.CssClasses_.CONTROL)[0],this.elementListItems_=this.elementList_.getElementsByClassName(this.CssClasses_.CHECKBOX),this.initCheckboxesInputs_()},e.prototype.initCheckboxesInputs_=function(){this.inputs_=this.element_.getElementsByTagName("input"),[].forEach.call(this.inputs_,function(e){e.addEventListener("change",this.onChange_.bind(this))},this),this.validFor_&&this.hideItems_()},e.prototype.configRichtext_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.INPUT)[0],tinymce.init({target:this.input_,menubar:!1})},e.prototype.configLookup_=function(){this.input_=this.element_.getElementsByClassName(this.CssClasses_.LOOKUP)[0],this.objectName_=this.element_.getAttribute(this.Constant_.OBJECT_NAME)||null,this.fieldId_=this.element_.getAttribute(this.Constant_.FIELD_ID)||"id",this.fieldLabel_=this.element_.getAttribute(this.Constant_.FIELD_LABEL)||"name",this.fieldMeta_=this.element_.getAttribute(this.Constant_.FIELD_META)||null,this.whereCondition_=this.element_.getAttribute(this.Constant_.WHERE_CONDITION)||"",this.items_=this.element_.getAttribute(this.Constant_.LOOKUP_ITEMS)||null,this.items_&&(this.items_=JSON.parse(this.items_.replace(/\'/g,'"')));var e={};this.objectName_?(e.emptySearchTermQuery=this.lookupEmptySearchTermQuery_.bind(this),e.filledSearchTermQuery=this.getLookupRecords_.bind(this)):e.items=this.items_,e.objectLabel=this.element_.getAttribute(this.Constant_.OBJECT_LABEL)||null,e.objectPluralLabel=this.element_.getAttribute(this.Constant_.OBJECT_PLURAL_LABEL)||null,this.onChangeHook_&&(e.onChange=window[this.onChangeHook_].bind(this)),$(this.input_).lookup(e)},e.prototype.configInput_=function(){this.input_=this.element_.querySelector("input, textarea, select"),this.onChangeHook_&&this.input_.addEventListener("change",window[this.onChangeHook_].bind(this))},e.prototype.lookupEmptySearchTermQuery_=function(e){this.items_&&e(this.items_)},e.prototype.setLookupValue_=function(e,t){try{Visualforce.remoting.Manager.invokeAction(this.Constant_.PICKLIST_CONTROLLER_RECORD,e,function(e){$(t.input_).lookup("setSelection",{id:e.Id,label:e.Name})},{escape:!0})}catch(s){console.warn(s)}},e.prototype.getLookupRecords_=function(e,t){try{Visualforce.remoting.Manager.invokeAction(this.Constant_.PICKLIST_CONTROLLER,this.objectName_,this.fieldId_,this.fieldLabel_,this.fieldMeta_,this.whereCondition_,e,this.processLookupRecords_.bind(this,t),{escape:!0})}catch(s){console.warn(s)}},e.prototype.processLookupRecords_=function(e,t,s){try{if(s.status&&void 0!==t){var i=[];this.fieldMeta_?[].forEach.call(t,function(e){i.push({id:e[this.fieldId_],label:fielo.util.unescapeHTML(e[this.fieldLabel_]),metaLabel:fielo.util.unescapeHTML(e[this.fieldMeta_])})},this):[].forEach.call(t,function(e){i.push({id:fielo.util.unescapeHTML(e[this.fieldId_]),label:fielo.util.unescapeHTML(e[this.fieldLabel_])})},this),e(i)}}catch(n){throw n}},e.prototype.clearOptions_=function(){switch(this.type_){case"picklist":if(this.optionsGetter_)for(this.disable_();this.elementList_.firstChild;)this.elementList_.removeChild(this.elementList_.firstChild)}},e.prototype.renderPicklist_=function(){this.label_.textContent=this.labelValue_;var e="";this.required_||(e+='<li id="'+this.formId_+'-void" data-value="" class="'+this.CssClasses_.DROPDOWN_ITEM+" "+this.CssClasses_.VOID_ITEM+'" role="presentation" title="'+this.labelValue_+'"><a href="javascript:void(0)" role="menuitemradio" data-label-value="'+this.labelValue_+'" ><p class="slds-truncate"><svg aria-hidden="true" class="slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.FieloSalesforce_Backend)}/lightning/icons/utility-sprite/svg/symbols.svg#check"></use></svg><span class="option-text">'+this.labelValue_+"</span></p></a></li>");var t=0;this.options_.forEach(function(s){e+='<li class="slds-dropdown__item" id="option-'+t+'" data-value="'+s.value.replace(/\"/g,"##").replace(/&quot;/g,"##").replace(/\'/g,"#-#")+'" role="presentation"><a href="javascript:void(0)" role="menuitemradio" data-label-value="'+s.label+'" ><p class="slds-truncate"><svg aria-hidden="true" class="slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small"><use xlink:href="'+BackEndJSSettings.RESOURCE.BACKEND+'/lightning/icons/utility-sprite/svg/symbols.svg#check" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="option-text">'+s.label+"</span></p></a></li>",t++}),this.elementList_.innerHTML=e,$(this.input_).picklist("getValue").$choices=$("."+this.CssClasses_.DROPDOWN_ITEM+" a",this.input_),$(this.input_).picklist("bindChoices")},e.prototype.renderCheckboxes_=function(){var e="";this.options_.forEach(function(t){e+='<div class="'+this.CssClasses_.CONTROL+'"><span class="'+this.CssClasses_.CHECKBOX+'"><input type="checkbox" name="options" value ="'+t.value+'" id="'+t.id.replace(/\s/g,"")+'"/><label class="'+this.CssClasses_.CHECKBOX+'__label" for="'+t.id.replace(/\s/g,"")+'"><span class="'+this.CssClasses_.CHECKBOX+'--faux"></span><span class="'+this.CssClasses_.LABEL+'">'+t.label+"</span> </label> </span> </div>"},this),this.elementList_.innerHTML=e,this.initCheckboxesInputs_()},e.prototype.hideItems_=function(){switch(this.type_){case"picklist":case"checkboxes":[].forEach.call(this.elementListItems_,function(e){e.classList.add(this.CssClasses_.HIDE)},this),this.voidItem_&&this.voidItem_.classList.remove(this.CssClasses_.HIDE)}},e.prototype.hide=function(){this.element_.classList.add(this.CssClasses_.HIDE)},e.prototype.show=function(){this.element_.classList.remove(this.CssClasses_.HIDE)},e.prototype.clearSelected_=function(){switch(this.type_){case"picklist":[].forEach.call(this.elementList_.getElementsByClassName(this.CssClasses_.SELECTED),function(e){e.classList.remove(this.CssClasses_.SELECTED)},this);break;case"checkboxes":this.clear()}},e.prototype.showValidOptions_=function(e){switch(this.hideItems_(),this.type_){case"picklist":case"checkboxes":this.validFor_.hasOwnProperty(e)&&this.validFor_[e].forEach(function(e){this.elementList_.querySelector('[data-value="'+e+'"]').classList.remove(this.CssClasses_.HIDE)},this)}this.cbValidOptions_()},e.prototype.selectFirstOption=function(){"hidden"!==this.type_&&this.required_&&this.elementListItems_&&1===$(this.elementListItems_).not("."+this.CssClasses_.HIDE).length&&this.set("value",$(this.elementListItems_).not("."+this.CssClasses_.HIDE)[0].getAttribute(this.Constant_.VALUE))},e.prototype.onChange_=function(){this.dontChangeOnAjax&&this.doChange()},e.prototype.doChange=function(){switch(this.type_){case"radio":[].forEach.call(this.elementListItems_,function(e){e.checked&&(this.input_=e)},this)}if("function"==typeof window[this.onChangeHook_]&&window[this.onChangeHook_](this.get("value"),this),null!==this.dependableElements)for(var e in this.dependableElements)this.dependableElements.hasOwnProperty(e)&&this.dependableElements[e].refresh(this.get("value"))},e.prototype.reset_=function(){switch(this.type_){case"picklist":this.label_.textContent=this.labelValue_;break;case"checkboxes":}if(this.clearSelected_(),this.clearOptions_(),null!==this.dependableElements)for(var e in this.dependableElements)this.dependableElements.hasOwnProperty(e)&&this.dependableElements[e].reset_()},e.prototype.refresh=function(e){this.reset_(),this.optionsGetter_&&"function"==typeof window[this.optionsGetter_]?window[this.optionsGetter_](e,this):this.validFor_&&(this.showValidOptions_(e),this.enable_(),this.selectFirstOption())},e.prototype.render=function(e){switch(this.options_=e,this.type_){case"picklist":this.renderPicklist_();break;case"checkboxes":this.renderCheckboxes_()}this.enable_()},e.prototype.get=function(e){var t,s=[];switch(e){case"id":return this.id_;case"fieldName":return this.element_.getAttribute(this.Constant_.FIELD_NAME);case"label":return this.element_.getAttribute(this.Constant_.OBJECT_LABEL);case"name":return this.input_.name;case"type":return this.type_;case"value":switch(this.type_){case"input-date":case"input-datetime":if(t=this.input_.value,this.input_.value){
t=$(this.input_).datepicker("getDate").valueOf();var i=(new Date).getTimezoneOffset();(new Date).isDst()?new Date(t).toLocaleDateString("en",{timeZoneName:"long"}).indexOf("Summer Time")===-1&&(i+=60):new Date(t).toLocaleDateString("en",{timeZoneName:"long"}).indexOf("Summer Time")>-1&&(i-=60),i*=-1,t+=6e4*i,"input-datetime"===this.type_&&(t-=6e4*i,t+=6e4*BackEndJSSettings.OFFSET)}else t=null;return t;case"picklist":return t=$(this.input_).picklist("getValueId"),"string"==typeof t?(t=this.input_.querySelector("#"+t),t=t&&t.classList.contains(this.CssClasses_.SELECTED)?t.getAttribute(this.Constant_.VALUE):null):t=null,t;case"lookup":return t=$(this.input_).lookup("getSelection"),t&&(t=t.id),t;case"multiselect":var n=$(this.input_).multiSelect("getSelectedItems");return[].forEach.call(n,function(e){e.hasOwnProperty("id")&&s.push(e.id)}),s.length>0?s:[];case"radio":return this.input_?this.input_.value:null;case"checkbox":return this.input_.checked;case"checkboxes":return[].forEach.call(this.inputs_,function(e){e.checked&&s.push(e.value)}),s;case"richtext":return tinymce.get(this.input_.id).getContent();case"text":return this.element_.getElementsByClassName("fielosf-output")[0].innerHTML;default:return this.input_?this.input_.value:this.element_.getAttribute("data-value")}break;default:return null}},e.prototype.set=function(e,t){if(null!==t&&void 0!==t)switch(e){case"checkboxBinding":this.element_.querySelector("."+this.CssClasses_.CHECKBOX+" input").id=t,this.element_.getElementsByClassName(this.CssClasses_.CHECKBOX+"__label")[0].setAttribute("for",t);break;case"id":this.id_=t,this.element_.setAttribute(this.Constant_.COMPONENT_ID,t);break;case"name":this.input_.name=t;break;case"type":this.type_=t,this.element_.setAttribute(this.Constant_.TYPE,t);break;case"value":switch(this.type_){case"input-date":case"input-datetime":if(!isNaN(t)){var s=(new Date).getTimezoneOffset();(new Date).isDst()?moment(t)._d.toLocaleDateString("en",{timeZoneName:"long"}).indexOf("Summer Time")===-1&&(s+=60):moment(t)._d.toLocaleDateString("en",{timeZoneName:"long"}).indexOf("Summer Time")>-1&&(s-=60),s*=-1,t-=6e4*s,"input-datetime"===this.type_&&(t+=6e4*s,t-=6e4*BackEndJSSettings.OFFSET),$(this.input_).datepicker("setDate",t)}break;case"picklist":var i=this.input_.querySelector('[data-value="'+t+'"]');i&&$(this.input_).picklist("setValue",i.id,!0),this.enable_();break;case"multiselect":$(this.input_).multiSelect("setSelectedItems",t);break;case"lookup":this.setLookupValue_(t,this);break;case"radio":[].forEach.call(this.elementListItems_,function(e){e.value===t&&(this.input_=e,this.input_.checked=!0)},this);break;case"checkbox":this.input_.checked=t;break;case"checkboxes":t.forEach(function(e){this.inputs_[e].checked=e},this);break;case"text":this.element_.getElementsByClassName("fielosf-output")[0].innerHTML=t;break;case"richtext":tinymce.get(this.input_.id).setContent(t);break;default:this.input_.value=t}break;default:this.element_.setAttribute(e,t)}},e.prototype.clear=function(){switch(this.type_){case"picklist":this.label_.textContent=this.labelValue_;var e=this.input_.getElementsByClassName(this.CssClasses_.SELECTED)||null;[].forEach.call(e,function(e){e.classList.remove(this.CssClasses_.SELECTED)},this);break;case"lookup":$(this.input_).lookup("setSelection",{});break;case"radio":[].forEach.call(this.elementListItems_,function(e){e.checked=!1});break;case"checkbox":this.input_.checked=!1;break;case"checkboxes":[].forEach.call(this.inputs_,function(e){e.checked=!1});break;case"multiselect":var t=[],s=this.element_.querySelectorAll("."+this.CssClasses_.PICKLIST+"__item");[].forEach.call(s,function(e){t.push(e.id)}),$(this.input_).multiSelect("setUnselectedItems",t);break;case"richtext":tinymce.get(this.input_.id).setContent("");break;default:this.input_.value=""}this.selectFirstOption()},e.prototype.registerDependency_=function(){if(this.controllerElement_){var e=document.getElementById(this.controllerElement_);e&&"object"==typeof e.FieloFormElement&&(e.FieloFormElement.dependableElements[this.element_.id]=this)}},e.prototype.disable_=function(){this.element_.setAttribute("disabled",""),this.element_.classList.add("disabled")},e.prototype.enable_=function(){this.element_.hasAttribute("disabled")&&(this.element_.removeAttribute("disabled"),this.element_.classList.remove("disabled"))},e.prototype.cbValidOptions_=function(){this.cbValidOptionsActions_.forEach(function(e){"function"==typeof window[e]&&window[e](this)},this)},e.prototype.registerCbValidOptions=function(e){this.cbValidOptionsActions_.push(e)},e.prototype.setDataOptions_=function(){var e=this.element_.getAttribute(this.Constant_.OPTIONS)||null;return e&&(e=JSON.parse(e)),e},e.prototype.init=function(){if(this.element_){switch(this.id_=this.element_.getAttribute(this.Constant_.COMPONENT_ID),this.help_=this.element_.getElementsByClassName(this.CssClasses_.HELP)[0]||null,this.icon_=this.element_.getElementsByClassName(this.CssClasses_.ICON)[0]||null,this.icon_&&(this.popover_=this.element_.getElementsByClassName(this.CssClasses_.POP_OVER)[0],this.setIconHover_()),this.type_=this.element_.getAttribute(this.Constant_.TYPE)||null,this.formId_="",this.element_.hasAttribute(this.Constant_.FORM_ID)&&(this.formId_=this.element_.getAttribute(this.Constant_.FORM_ID)||""),this.cbValidOptionsActions_=[],this.dontChangeOnAjax=!0,this.required_=!1,this.element_.hasAttribute(this.Constant_.REQUIRED)&&(this.required_="true"===this.element_.getAttribute(this.Constant_.REQUIRED)),this.controllerElement_=this.element_.getAttribute(this.Constant_.CONTROLLER_ELEMENT)||null,this.controllerElement_&&this.disable_(),this.validFor_=this.element_.getAttribute(this.Constant_.VALID_FOR)||null,this.validFor_&&(this.validFor_=JSON.parse(this.validFor_)),this.onChangeHook_=this.element_.getAttribute(this.Constant_.ON_CHANGE)||null,this.dataOptions_=this.setDataOptions_(),this.optionsGetter_=this.element_.getAttribute(this.Constant_.OPTIONS_GETTER)||null,this.dependableElements={},this.type_){case"picklist":this.configPicklist_();break;case"lookup":this.configLookup_();break;case"input-date":case"input-datetime":this.configDatepicker_();break;case"radio":this.configRadio_();break;case"checkbox":this.configCheckbox_();break;case"checkboxes":this.configCheckboxes_();break;case"multiselect":this.configMultiselect_();break;case"richtext":this.configRichtext_();break;default:this.configInput_()}this.registerDependency_(),this.element_.addEventListener("click",function(e){this.element_.hasAttribute("disabled")&&(e.preventDefault(),e.stopPropagation())}.bind(this)),this.selectFirstOption()}},fielo.util.register({constructor:e,classAsString:"FieloFormElement",cssClass:"slds-form-element",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloOutput=e,e.prototype.Constant_={TYPE:"data-type"},e.prototype.CssClasses_={HIDE:"slds-hide"},e.prototype.configDate_=function(){var e=BackEndJSSettings.DATE_FORMAT,t=this.element_.innerText;""!==t&&(t=fielo.util.parseDateFromSF(t),isNaN(t)||("datetime"===this.type_.toLowerCase()&&(t-=6e4*BackEndJSSettings.OFFSET,e=BackEndJSSettings.DATETIME_FORMAT),t=new Date(t).toISOString(),t=moment(t).parseZone(t).utc(),"datetime"===this.type_.toLowerCase()&&(t=t.calendar(null,{sameElse:e}).replace(/am$/g,"AM").replace(/pm$/g,"PM")),"date"===this.type_.toLowerCase()&&(t=t.format(e)),this.element_.innerText=t))},e.prototype.set=function(e){switch(this.type_.toLowerCase()){case"checkbox":case"boolean":e&&this.element_.getElementsByTagName("input")[0].setAttribute("checked",e);break;default:this.element_.innerHTML=e}this.config_()},e.prototype.renderHTML_=function(){$(this.element_).html($("<div/>").html(this.element_.innerHTML).text())},e.prototype.config_=function(){switch(this.type_.toLowerCase()){case"date":case"datetime":this.configDate_();break;case"html":this.renderHTML_()}},e.prototype.init=function(){this.element_&&(this.type_=this.element_.getAttribute(this.Constant_.TYPE)||"",this.config_(),this.element_.classList.remove(this.CssClasses_.HIDE))},fielo.util.register({constructor:e,classAsString:"FieloOutput",cssClass:"fielosf-output",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloSpinner=e,e.prototype.Constant_={},e.prototype.CssClasses_={HIDE:"slds-hide"},e.prototype.show=function(){this.element_.classList.remove(this.CssClasses_.HIDE)},e.prototype.hide=function(){this.element_.classList.add(this.CssClasses_.HIDE)},e.prototype.init=function(){this.element_&&(window.fielo.util.spinner=this.element_)},componentHandler.register({constructor:e,classAsString:"FieloSpinner",cssClass:"slds-spinner_container",widget:!0}),window.fielo.util.createSpinner=function(){var e=document.createElement("div");e.setAttribute("class","slds-spinner_container slds-spinner_container--main slds-hide"),e.innerHTML='<div class="slds-spinner--brand slds-spinner slds-spinner--medium" role="alert"><span class="slds-assistive-text">'+BackEndJSSettings.LABELS.Loading+'</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div>',componentHandler.upgradeElement(e),document.getElementsByClassName("fielosf")[0].appendChild(e),window.fielo.util.spinner=e}}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloButton=e,e.prototype.Constant_={ACTION:"data-action",CONFIRM:"data-confirm",CONFIRM_MESSAGE:"data-confirm-message",HAS_ERROR:BackEndJSSettings.LABELS.ReviewFollowingErrors,PARAMETERS:"data-parameters",SURE:BackEndJSSettings.LABELS.Areyousure,TYPE:"data-type",REFLECTION:"data-reflection"},e.prototype.CssClasses_={},e.prototype.disable=function(){this.element_.setAttribute("disabled","")},e.prototype.enable=function(){this.element_.removeAttribute("disabled")},e.prototype.setupRemote_=function(){this.action_=this.element_.getAttribute(this.Constant_.ACTION)||null,this.action_&&(this.type_=this.element_.getAttribute(this.Constant_.TYPE)||null)},e.prototype.getParameters=function(){return this.parameters_},e.prototype.setParameter=function(e,t){this.parameters_[e]=t,this.element_.setAttribute(this.Constant_.PARAMETERS,JSON.stringify(this.parameters_))},e.prototype.clearParameters=function(){this.parameters_={},this.element_.setAttribute(this.Constant_.PARAMETERS,"")},e.prototype.setupConfirm_=function(){this.confirm_="true"===this.element_.getAttribute(this.Constant_.CONFIRM),this.confirm_&&(this.confirmMessage=this.element_.getAttribute(this.Constant_.CONFIRM_MESSAGE)||this.Constant_.SURE,this.wasConfirmed=!1)},e.prototype.processHandler_=function(e){fielo.util.spinner.FieloSpinner.hide();var t=!1;"undefined"!=typeof e.messages&&e.messages.length>0&&e.messages.forEach(function(e){"error"!==e.severity.toLowerCase()&&"fatal"!==e.severity.toLowerCase()||(t=!0)});var s=[],i=fielo.util.notify.create();t?(s.push(this.Constant_.HAS_ERROR),i.FieloNotify.setTheme("error")):i.FieloNotify.setTheme("success"),e.messages.forEach(function(e){s.push(e.summary)},this),i.FieloNotify.addMessages(s),i.FieloNotify.show(),s.length=0,e.redirectURL&&"reload"===e.redirectURL?location.reload():""!==e.redirectURL&&void 0!==e.redirectURL?location.replace(e.redirectURL):this.callback()},e.prototype.clickHandler_=function(e){if(this.confirm_&&!confirm(this.confirmMessage))return e.stopPropagation(),e.preventDefault(),this.wasConfirmed=!1,!1;if(this.wasConfirmed=!0,this.action_)switch(this.type_){case"Remote":fielo.util.spinner.FieloSpinner.show();try{this.reflection_?Visualforce.remoting.Manager.invokeAction(this.action_,"Remote"===this.type_?this.recordId_:{},this.reflection_,JSON.stringify(this.parameters_),this.processHandler_.bind(this),{escape:!1}):Visualforce.remoting.Manager.invokeAction(this.action_,"Remote"===this.type_?this.recordId_:{},this.processHandler_.bind(this),{escape:!1})}catch(t){console.warn(t)}}},e.prototype.callback=function(e){console.log(e)},e.prototype.init=function(){this.element_&&(this.element_.addEventListener("click",this.clickHandler_.bind(this)),this.parameters_=this.element_.getAttribute(this.Constant_.PARAMETERS)||null,this.reflection_=this.element_.getAttribute(this.Constant_.REFLECTION)||null,this.parameters_?(this.parameters_=JSON.parse(this.parameters_.replace(/\'/g,'"')),this.recordId_=this.parameters_.Id||null):this.parameters_={},this.setupRemote_(),this.setupConfirm_())},componentHandler.register({constructor:e,classAsString:"FieloButton",cssClass:"slds-button",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloSelect=e,e.prototype.Constant_={},e.prototype.CssClasses_={},e.prototype.getValue=function(){return this.element_.options[this.element_.selectedIndex].value},e.prototype.init=function(){this.element_},componentHandler.register({constructor:e,classAsString:"FieloSelect",cssClass:"slds-select",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloMenu=e,e.prototype.Constant_={},e.prototype.CssClasses_={BUTTON_OPEN:"fielosf-menu__open",ITEMS_CONTAINER:"fielosf-menu__items-container",VIEW_MENU:"fielosf-menu--is-view",HIDE:"slds-hide"},e.prototype.trimSalesforceIds_=function(){[].forEach.call(this.itemsContainer_.getElementsByTagName("a"),function(e){var t=e.href.split("?fcf=");t.length>1&&(e.href=t[0]+"?fcf="+t[1].slice(0,-3))})},e.prototype.toggleOpen_=function(){this.itemsContainer_.classList.toggle(this.CssClasses_.HIDE),this.isOpen_?this.isOpen_=!1:this.isOpen_=!0},e.prototype.toggleOpenClick=function(){this.toggleOpen_()},e.prototype.toggleOpenMouseOut=function(){this.itemsContainer_.classList.add(this.CssClasses_.HIDE)},e.prototype.init=function(){this.element_&&(this.isOpen_=!1,this.btnOpen_=this.element_.getElementsByClassName(this.CssClasses_.BUTTON_OPEN)[0],this.itemsContainer_=this.element_.getElementsByClassName(this.CssClasses_.ITEMS_CONTAINER)[0],this.btnOpen_.addEventListener("click",this.toggleOpenClick.bind(this)),this.itemsContainer_.addEventListener("mouseleave",this.toggleOpenMouseOut.bind(this)),this.element_.classList.contains(this.CssClasses_.VIEW_MENU)&&this.trimSalesforceIds_())},componentHandler.register({constructor:e,classAsString:"FieloMenu",cssClass:"fielosf-menu",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloTabs=e,e.prototype.CssClasses_={LINK:"slds-tabs--default__link",TABS:"slds-tabs--default__item",PANELS:"slds-tabs--default__content",ACTIVE:"slds-active",SHOW:"slds-show",HIDE:"slds-hide"},e.prototype.Constant_={CONTROLS:"aria-controls"},e.prototype.setTabs_=function(){this.tabs_=this.element_.getElementsByClassName(this.CssClasses_.TABS),this.activeTab_=this.element_.querySelector("."+this.CssClasses_.TABS+"."+this.CssClasses_.ACTIVE)},e.prototype.setPanels_=function(){var e=this.element_.getElementsByClassName(this.CssClasses_.PANELS);this.panels_=[],[].forEach.call(e,function(e){this.panels_[e.id]=e,e.classList.contains(this.CssClasses_.SHOW)&&(this.activePanel_=this.panels_[e.id])},this)},e.prototype.setEventListeners_=function(){[].forEach.call(this.tabs_,function(e){e.addEventListener("click",this.clickHandler_.bind(this))},this)},e.prototype.clickHandler_=function(e){this.showTab_(e.target),this.callback()},e.prototype.toggle_=function(){try{this.activeTab_.classList.toggle(this.CssClasses_.ACTIVE),this.activePanel_.classList.toggle(this.CssClasses_.SHOW),this.activePanel_.classList.toggle(this.CssClasses_.HIDE)}catch(e){}},e.prototype.showTab_=function(e){this.toggle_(),this.activeTab_=e.parentElement,this.activePanel_=this.panels_[e.getAttribute(this.Constant_.CONTROLS)],this.toggle_()},e.prototype.init=function(){this.element_&&(this.callback=function(){},this.setTabs_(),this.setPanels_(),this.setEventListeners_())},fielo.helper.register({constructor:e,classAsString:"FieloTabs",cssClass:"slds-tabs--default",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloPaginator=e,e.prototype.Constant_={CONTROLLER:"data-controller",CONTROLLER_ARGUMENTS:"data-controller-arguments",BINDING:"data-binding",PAGE:"data-page",RECORDS_PER_PAGE:"data-records-per-page",RECORDS_IN_PAGE:"data-records-in-page",DISABLED:"disabled",FILTERS:"data-filters",ORDER_BY:"data-order-by",WHERE_CLAUSE:"data-where-clause"},e.prototype.CssClasses_={BUTTON_PREVIOUS:"fielosf-button__previous",BUTTON_NEXT:"fielosf-button__next",HIDE:"slds-hide"},e.prototype.setDefaults_=function(){this.controller_=this.element_.getAttribute(this.Constant_.CONTROLLER),this.dataBinding_=this.element_.getAttribute(this.Constant_.BINDING),this.page_=Number(this.element_.getAttribute(this.Constant_.PAGE))||1,this.recordsPerPage_=Number(this.element_.getAttribute(this.Constant_.RECORDS_PER_PAGE)),this.filters_=this.element_.getAttribute(this.Constant_.FILTERS)||null,this.filters_?this.filters_=JSON.parse(this.filters_):this.filters_={},this.orderBy_=this.element_.getAttribute(this.Constant_.ORDER_BY)||null,this.buttons_={previous:this.element_.querySelector("."+this.CssClasses_.BUTTON_PREVIOUS),next:this.element_.querySelector("."+this.CssClasses_.BUTTON_NEXT)},this.quantityOfRecords_=Number(this.element_.getAttribute(this.Constant_.RECORDS_IN_PAGE))||0,this.whereClause_=this.element_.getAttribute(this.Constant_.WHERE_CLAUSE)||null},e.prototype.callback=function(e){fielo.util.spinner.FieloSpinner.hide(),console.warn("callback of paginator not binded"),console.log(e)},e.prototype.setButtonsStatus_=function(){this.quantityOfRecords_<=this.recordsPerPage_?this.buttons_.next.setAttribute(this.Constant_.DISABLED,""):this.buttons_.next.removeAttribute(this.Constant_.DISABLED),1===this.page_?this.buttons_.previous.setAttribute(this.Constant_.DISABLED,""):this.buttons_.previous.removeAttribute(this.Constant_.DISABLED)},e.prototype.getPreviousPage_=function(){this.buttons_.previous.hasAttribute(this.Constant_.DISABLED)||(this.setPage(this.page_-1),this.getRecords())},e.prototype.getNextPage_=function(){this.buttons_.next.hasAttribute(this.Constant_.DISABLED)||(this.setPage(this.page_+1),this.getRecords())},e.prototype.setLinksListeners_=function(){this.buttons_.previous.addEventListener("click",this.getPreviousPage_.bind(this)),this.buttons_.next.addEventListener("click",this.getNextPage_.bind(this))},e.prototype.setUpLinks_=function(){this.setButtonsStatus_(),this.setLinksListeners_()},e.prototype.setPage=function(e){this.page_=e||1,this.element_.setAttribute(this.Constant_.PAGE,this.page_)},e.prototype.getFilters=function(){return this.filters_},e.prototype.setFilters=function(e){for(var t in e)({}).hasOwnProperty.call(e,t)&&(this.filters_[t]=e[t]);this.element_.setAttribute(this.Constant_.FILTERS,JSON.stringify(this.filters_))},e.prototype.setOrderBy=function(e){this.orderBy_=e,this.element_.setAttribute(this.Constant_.ORDER_BY,e)},e.prototype.resolveRequest_=function(e){if(e)this.quantityOfRecords_=e.length||0,this.callback(e.slice(0,this.recordsPerPage_));else{fielo.util.spinner.FieloSpinner.hide();var t=fielo.util.notify.create();t.FieloNotify.addMessages([BackEndJSSettings.LABELS.NoRecordsToShow]),t.FieloNotify.setTheme("info"),t.FieloNotify.show()}this.setButtonsStatus_()},e.prototype.getSObject=function(){return this.element_.getAttribute(this.Constant_.CONTROLLER_ARGUMENTS).split("|")[0]},e.prototype.getRecords=function(){fielo.util.spinner.FieloSpinner.show();var e=[];e.push(this.controller_);var t=this.element_.getAttribute(this.Constant_.CONTROLLER_ARGUMENTS).split("|")||null;t.forEach(function(t){e.push(t)}),e.push(this.page_*this.recordsPerPage_-this.recordsPerPage_),e.push(this.orderBy_),e.push(JSON.stringify(this.filters_)),e.push(this.recordsPerPage_+1),e.push(this.whereClause_),e.push(this.resolveRequest_.bind(this)),e.push({escape:!0});try{Visualforce.remoting.Manager.invokeAction.apply(Visualforce.remoting.Manager,e)}catch(s){fielo.util.spinner.FieloSpinner.hide()}},e.prototype.getParams_=function(){return{offset:this.recordsPerPage_,orderBy:this.orderBy_,page:this.page_}},e.prototype.init=function(){this.element_&&(this.setDefaults_(),this.setUpLinks_())},fielo.helper.register({constructor:e,classAsString:"FieloPaginator",cssClass:"fielosf-paginator"})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloFilter=e,e.prototype.Constant_={BINDING:"data-binding",CHANGE_TITLE:"data-change-title",DATA_FILTERS:"data-filters"},e.prototype.CssClasses_={ACTIVE:"slds-is-active",HIDE:"slds-hide",ITEM:"fielosf-list__item",LINK:"fielosf-link",PAGINATOR:"fielosf-paginator",TITLE:"fielosf-filter__title"},e.prototype.setDefaults_=function(){this.title_=this.element_.querySelector("."+this.CssClasses_.TITLE)||null,null!==this.title_&&(this.activeTitle_=this.element_.querySelector("."+this.CssClasses_.HIDE+"."+this.CssClasses_.ITEM+"["+this.Constant_.CHANGE_TITLE+"]")||!1),this.items_=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+" ."+this.CssClasses_.LINK),this.itemActive_=this.element_.querySelector("."+this.CssClasses_.ITEM+"."+this.CssClasses_.ACTIVE)||!1,this.dataBinding_=this.element_.getAttribute(this.Constant_.BINDING)||null,this.filters_={},this.bindWithPaginators_(),this.setupItems_(),this.callback=function(){}},e.prototype.bindWithPaginators_=function(){this.dataBinding_?this.listOfPaginators_=document.querySelectorAll("."+this.CssClasses_.PAGINATOR+"["+this.Constant_.BINDING+"="+this.dataBinding_+"]"):this.listOfPaginators_=document.getElementsByClassName(this.CssClasses_.PAGINATOR)},e.prototype.cleanActiveCss_=function(){this.itemActive_&&this.itemActive_.classList.remove(this.CssClasses_.ACTIVE)},e.prototype.checkIfItemIsAlreadyActive_=function(e){e.classList.contains(this.CssClasses_.ACTIVE)?this.clickedOnSameItem_=!0:this.clickedOnSameItem_=!1},e.prototype.activeItem_=function(e){this.checkIfItemIsAlreadyActive_(e),this.clickedOnSameItem_||(this.cleanActiveCss_(),this.itemActive_=e,this.itemActive_.classList.add(this.CssClasses_.ACTIVE))},e.prototype.updateTitle=function(e){this.activeTitle_.classList.remove(this.CssClasses_.HIDE),this.title_.textContent=String(e.textContent).trim(),this.activeTitle_=e,this.activeTitle_.classList.add(this.CssClasses_.HIDE)},e.prototype.clearFilter_=function(){for(var e in this.filters_)this.filters_.hasOwnProperty(e)&&(this.filters_[e]=null)},e.prototype.itemClickListener_=function(e){e.preventDefault();var t=fielo.util.getParentUntil(e.currentTarget,"."+this.CssClasses_.ITEM);this.filters_=JSON.parse(e.currentTarget.getAttribute(this.Constant_.DATA_FILTERS)),this.activeItem_(t),null!==this.title_&&t.hasAttribute(this.Constant_.CHANGE_TITLE)&&this.updateTitle(t),this.clickedOnSameItem_||[].forEach.call(this.listOfPaginators_,function(e){e.FieloPaginator.setFilters(this.filters_),e.FieloPaginator.setPage(),e.FieloPaginator.getRecords()},this),this.callback()},e.prototype.setupItems_=function(){[].forEach.call(this.items_,function(e){e.addEventListener("click",this.itemClickListener_.bind(this))},this)},e.prototype.init=function(){this.element_&&this.setDefaults_()},fielo.helper.register({constructor:e,classAsString:"FieloFilter",cssClass:"fielosf-filter"})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloForm=e,e.prototype.Constant_={DEFAULT:"data-default-value",FIELD_NAME:"data-field-name",FIELDS:"data-fields",OBJECT_NAME:"data-object-name",RECORD_ID:"data-record-id",REDIRECT:"data-redirect",RETRIEVE_CONTROLLER:"data-retrieve-controller",SAVE_CONTROLLER:"data-save-controller",SECONDARY_FIELDS:"data-secondary-parameters",SOBJECT_TYPE:"data-sobject-type",TYPE:"data-type"},e.prototype.CssClasses_={CONTAINER:"slds-form-element",ELEMENTS:"slds-form-element",ERROR:"slds-has-error",HEADER:"slds-modal__header",HIDE:"slds-hide",INPUT:"slds-input",NOTIFY:"slds-notify",NOTIFY_CONTAINER:"slds-notify_container",SAVE:"slds-form__save"},e.prototype.setDefaults_=function(){this.data_={},this.secondaryData_={},this.fields_=this.element_.getAttribute(this.Constant_.FIELDS).replace(/ /g,"").split(","),this.header_=this.element_.getElementsByClassName(this.CssClasses_.HEADER)[0]||null,this.elements_=[],[].forEach.call(this.element_.getElementsByClassName(this.CssClasses_.CONTAINER),function(e){componentHandler.upgradeElement(e),this.elements_[e.FieloFormElement.get("fieldName")]=e},this),this.saveButton_=this.element_.getElementsByClassName(this.CssClasses_.SAVE)[0]||null,this.saveButton_&&(this.saveButton_.addEventListener("click",this.saveHandler_.bind(this)),this.saveButton_=this.saveButton_.FieloButton),this.recordId_=null,this.saveController_=this.element_.getAttribute(this.Constant_.SAVE_CONTROLLER),this.retrieveController_=this.element_.getAttribute(this.Constant_.RETRIEVE_CONTROLLER),this.secondaryFields_=this.element_.getAttribute(this.Constant_.SECONDARY_FIELDS)||null,this.secondaryFields_&&(this.secondaryFields_=this.secondaryFields_.split(",")),this.isEditing=!1,this.redirect_=this.element_.getAttribute(this.Constant_.REDIRECT),this.sObjectType_=this.element_.querySelector("["+this.Constant_.SOBJECT_TYPE+"]"),this.sObjectType_&&(this.sObjectType_=this.sObjectType_.getAttribute(this.Constant_.SOBJECT_TYPE)),location.hash&&location.hash.split("#")[1]===this.element_.id&&(this.clear_(),$(this.element_).modal("show"))},e.prototype.getValues_=function(){this.nullFields_=[],$.extend(this.data_,this.parameters_);for(var e in this.elements_)if(this.elements_.hasOwnProperty(e)&&""!==this.elements_[e].FieloFormElement.get("fieldName")){var t=this.elements_[e].FieloFormElement.get("value");"undefined"!=typeof this.elements_[e].FieloFormElement.get("fieldName")&&""!==this.elements_[e].FieloFormElement.get("fieldName")&&(this.secondaryFields_&&this.contains_(this.secondaryFields_,e)||(""===t||null===t?this.nullFields_.push(this.elements_[e].FieloFormElement.get("fieldName")):this.data_[this.elements_[e].FieloFormElement.get("fieldName")]=t))}this.secondaryFields_&&this.secondaryFields_.forEach(function(e){this.elements_[e]?this.secondaryData_[this.elements_[e].FieloFormElement.get("fieldName")]=this.elements_[e].FieloFormElement.get("value"):this.secondaryData_[e]=null},this)},e.prototype.contains_=function(e,t){for(var s=0;s<e.length;s++)if(e[s]===t)return!0;return!1},e.prototype.processRemoteActionResult_=function(e,t){fielo.util.spinner.FieloSpinner.hide();var s=fielo.util.notify.create();e||t.status||(s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,t.message]),s.FieloNotify.setTheme("error"),s.FieloNotify.show());try{for(var i=this.header_.getElementsByClassName(this.CssClasses_.NOTIFY);i.length>0;)i[0].FieloNotify.hide();for(var n in this.elements_)this.elements_.hasOwnProperty(n)&&this.elements_[n].FieloFormElement.clean();if(t.status&&void 0!==e){var o=!1;"undefined"!=typeof e.messages&&e.messages.forEach(function(e){"error"!==e.severity.toLowerCase()&&"fatal"!==e.severity.toLowerCase()||(o=!0)});var a=[];o||s.FieloNotify.setTheme("success");var l={"&gt;":">","&lt;":"<","&amp;":"&","&quot;":'"'};if(e.messages.forEach(function(e){var t=e.summary;for(var s in l)if(l.hasOwnProperty(s)){var i=new RegExp(s,"g");t=t.replace(i,l[s])}void 0===e.componentId?a.push(t):this.elements_.hasOwnProperty(e.componentId)?this.elements_[e.componentId].FieloFormElement.setErrorMessage(t):a.push(t)},this),!o)return s.FieloNotify.addMessages(a),s.FieloNotify.show(),$(this.element_).modal("dismiss"),fielo.util.spinner.FieloSpinner.hide(),"true"===this.redirect_&&""!==e.redirectURL&&void 0!==e.redirectURL&&("reload"===e.redirectURL?location.reload():location.replace(e.redirectURL)),this.callback(),!1;s=fielo.util.notify.create(),s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors]),s.FieloNotify.setTheme("error"),s.FieloNotify.show(this.header_,!1),a.length>0&&(s=fielo.util.notify.create(),s.FieloNotify.addMessages([a]),s.FieloNotify.setTheme("offline"),s.FieloNotify.show(this.header_,!1)),a.length=0}else s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,t.message]),s.FieloNotify.setTheme("error"),s.FieloNotify.show()}catch(r){s.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,r]),s.FieloNotify.setTheme("error"),s.FieloNotify.show()}fielo.util.spinner.FieloSpinner.hide(),e&&(e.redirectURL&&"reload"===e.redirectURL?location.reload():""!==e.redirectURL&&void 0!==e.redirectURL&&location.replace(e.redirectURL))},e.prototype.callback=function(e){console.log(e)},e.prototype.saveHandler_=function(){this.saveButton_.wasConfirmed&&this.save_()},e.prototype.checkRequiredPassOk_=function(){this.requiredFailedElements_=[];var e=!1;for(var t in this.elements_)this.elements_.hasOwnProperty(t)&&this.elements_[t].FieloFormElement.required_&&(null===this.elements_[t].FieloFormElement.get("value")||""===this.elements_[t].FieloFormElement.get("value"))&&(this.requiredFailedElements_.push(this.elements_[t]),this.elements_[t].FieloFormElement.setErrorMessage(),e=!0);return!e},e.prototype.save_=function(){fielo.util.spinner.FieloSpinner.show();var e;if(this.getValues_(),this.recordId_?this.data_.Id=this.recordId_:this.sObjectType_&&""!==this.sObjectType_&&(this.data_.sObjectType=this.sObjectType_),this.data_.cloneId&&delete this.data_.cloneId,this.checkRequiredPassOk_()){var t=[];t.push(this.saveController_),t.push(this.data_),t.push(this.nullFields_);for(var s in this.secondaryData_)this.secondaryData_.hasOwnProperty(s)&&t.push(this.secondaryData_[s]);t.push(this.processRemoteActionResult_.bind(this)),t.push({escape:!0});try{Visualforce.remoting.Manager.invokeAction.apply(Visualforce.remoting.Manager,t)}catch(i){e=fielo.util.notify.create(),e.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,i]),e.FieloNotify.setTheme("error"),e.FieloNotify.show(),fielo.util.spinner.FieloSpinner.hide()}}else e=fielo.util.notify.create(),e.FieloNotify.addMessages([BackEndJSSettings.LABELS.CompleteRequiredFields]),e.FieloNotify.setTheme("error"),e.FieloNotify.show(),fielo.util.spinner.FieloSpinner.hide()},e.prototype.clear_=function(){for(var e=this.header_.getElementsByClassName(this.CssClasses_.NOTIFY);e.length>0;)e[0].FieloNotify.hide();var t=this.element_.getElementsByClassName(this.CssClasses_.ELEMENTS);[].forEach.call(t,function(e){var t=e.getAttribute(this.Constant_.DEFAULT);""===t?(e.FieloFormElement.clear(),e.classList.remove(this.CssClasses_.ERROR)):e.FieloFormElement.set("value",t)},this);for(var s=0;s<t.length;s++){var i=t[s].FieloFormElement.get("type");if("lookup"===i||i.indexOf("input")!==-1){var n=t[s].getAttribute(this.Constant_.DEFAULT);""===n?t[s].FieloFormElement.clear():t[s].FieloFormElement.set("value",n);break}}},e.prototype.setParameters_=function(){for(var e in this.parameters_)this.parameters_.hasOwnProperty(e)&&this.elements_.hasOwnProperty(e)&&this.elements_[e].FieloFormElement.set("value",this.parameters_[e])},e.prototype.retrieve_=function(e){if(this.parameters_=e.FieloButton.getParameters(),this.setParameters_(),this.parameters_.hasOwnProperty("Id")||this.parameters_.hasOwnProperty("cloneId")){this.isEditing=!0,this.recordId_=this.parameters_.Id;var t=this.parameters_.Id||this.parameters_.cloneId,s=this.element_.getAttribute(this.Constant_.FIELDS),i=this.element_.getAttribute(this.Constant_.OBJECT_NAME);Visualforce.remoting.Manager.invokeAction(this.retrieveController_,i,t,s,this.retrieveHandler_.bind(this),{escape:!1})}else this.isEditing=!1,this.setParameters_(),this.endRetrieve()},e.prototype.retrieveProxy_=function(e,t){e.FieloForm.clear_(),e.FieloForm.retrieve_(t)},window.FieloForm_retrieve=e.prototype.retrieveProxy_,e.prototype.retrieveHandler_=function(e){fielo.util.spinner.FieloSpinner.show(),this.result=e;try{var t="|";for(var s in e)e.hasOwnProperty(s)&&s.indexOf("__r")>-1&&(t+=s.slice(0,-1)+"c|");this.fields_.forEach(function(s){if(t.indexOf(s)>-1){var i;switch(typeof e[s.slice(0,-1)+"r"]){case"object":i=e[s.slice(0,-1)+"r"];var n;for(var o in i)if(i.hasOwnProperty(o)&&o.indexOf("__c")>-1){n=o;break}i=n?i[n].split(";"):e[s];break;case"array":default:
i=e[s.slice(0,-1)+"r"]}this.elements_[s].FieloFormElement.set("value",i)}else this.elements_[s]&&("input-date"===this.elements_[s].FieloFormElement.get("type")&&(e[s]=fielo.util.parseDateFromSF(e[s])),this.elements_[s].FieloFormElement.set("value",e[s]))},this),this.setParameters_(),this.endRetrieve()}catch(i){var n=fielo.util.notify.create();n.FieloNotify.addMessages([BackEndJSSettings.LABELS.ReviewFollowingErrors,i]),n.FieloNotify.setTheme("error"),n.FieloNotify.show()}for(var o=this.element_.getElementsByClassName(this.CssClasses_.ELEMENTS),a=0;a<o.length;a++){var l=o[a].FieloFormElement.get("type");if("lookup"===l||l.indexOf("input")!==-1){o[a].getElementsByClassName(this.CssClasses_.INPUT)[0].focus();break}}fielo.util.spinner.FieloSpinner.hide()},e.prototype.init=function(){this.element_&&(this.endRetrieve=function(){},this.setDefaults_())},fielo.helper.register({constructor:e,classAsString:"FieloForm",cssClass:"slds-form",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloRecentRecords=e,e.prototype.Constant_={ACTION:"data-action",ASYNC:"data-async",FIELD:"data-field",NAME:"data-name",RECORD_ID:"data-record-id",SHOW:"data-aljs-show",TYPE:"data-type",UPGRADED:"data-upgraded"},e.prototype.CssClasses_={BUTTON:"slds-button",CHECKBOXALL:"fielosf-recent-records-checkboxall",CHECKBOXES:"fielosf-recent-records-checkbox",COLUMN:"fielosf--col-model",CONTAINER:"fielosf-recent-records__container",DELETE:"delete-field",HEADER:"fielosf-recent-records__header",HIDE:"slds-hide",MODEL:"fielosf-recent-records__model",OUTPUT:"fielosf-output",PAGINATOR:"fielosf-paginator",ROW:"fielosf-recent-records__row",SLDS_HEADER:"fielosf-header"},e.prototype.renderRecords_=function(e){var t=0;if(this.model_){var s=this.model_.getElementsByClassName(this.CssClasses_.COLUMN)[0],i=this.model_.cloneNode(!0),n=this.element_.getElementsByClassName(this.CssClasses_.HEADER)[0],o=n.getElementsByClassName(this.CssClasses_.COLUMN)[0];for(var a in this.extraFields_)if(this.extraFields_.hasOwnProperty(a)){var l=s.cloneNode(!0);l.getElementsByClassName(this.CssClasses_.OUTPUT)[0].setAttribute(this.Constant_.FIELD,a),i.appendChild(l);var r=o.cloneNode(!0);r.classList.add(this.CssClasses_.DELETE),r.getElementsByClassName(this.CssClasses_.OUTPUT)[0].innerHTML=this.extraFields_[a],n.getElementsByClassName(this.CssClasses_.ROW)[0].appendChild(r)}var h=this.element_.getElementsByClassName(this.CssClasses_.CONTAINER)[0]||null;h.innerHTML="",e.forEach(function(e){var s=i.cloneNode(!0);s.classList.remove(this.CssClasses_.HIDE),s.setAttribute(this.Constant_.RECORD_ID,e.Id);var n=s.getElementsByClassName(this.CssClasses_.OUTPUT);[].forEach.call(n,function(t){var s,i=t.getAttribute(this.Constant_.FIELD).split("."),n=i.length>1;switch(n&&(s=i.slice(),s[i.length-1]="Id"),t.innerHTML=fielo.util.getObjectValue(e,i),t.getAttribute(this.Constant_.TYPE).toLowerCase()){case"link":case"reference":n?t.setAttribute("href","/"+fielo.util.getObjectValue(e,s)):t.setAttribute("href","/"+e.Id)}},this),[].forEach.call(s.querySelectorAll("["+this.Constant_.UPGRADED+"]"),function(e){e.removeAttribute(this.Constant_.UPGRADED),componentHandler.upgradeElement(e)},this),[].forEach.call(s.getElementsByClassName(this.CssClasses_.CHECKBOXES),function(e){e.FieloFormElement.set("checkboxBinding",t),t++}),h.appendChild(s)},this)}fielo.util.spinner.FieloSpinner.hide()},e.prototype.reload_=function(){this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords()},e.prototype.bindHeaderActionsCallbacks_=function(){[].forEach.call(document.querySelectorAll("."+this.CssClasses_.SLDS_HEADER+" ."+this.CssClasses_.BUTTON+"["+this.Constant_.ACTION+"]"),function(e){!e.FieloButton.type_||"Remote"!==e.FieloButton.type_&&"RemoteList"!==e.FieloButton.type_?"Modal"===e.FieloButton.type_&&(document.getElementById(e.getAttribute(this.Constant_.SHOW)).FieloForm.callback=this.reload_.bind(this)):e.FieloButton.callback=this.reload_.bind(this)},this)},e.prototype.checkOrUncheckAll_=function(){for(var e=0;e<this.checkboxes_.length;e++)this.checkboxes_[e].FieloFormElement.set("value",this.selectAllCheckbox_.FieloFormElement.get("value"))},e.prototype.uncheckAll=function(){for(var e=0;e<this.checkboxes_.length;e++)this.checkboxes_[e].FieloFormElement.set("value","false");this.selectAllCheckbox_.FieloFormElement.set("value","false")},e.prototype.addExtraField=function(e,t){this.extraFields_[e]=t},e.prototype.cleanExtraFields=function(){this.extraFields_={};var e=this.element_.querySelectorAll("."+this.CssClasses_.HEADER+" ."+this.CssClasses_.DELETE);[].forEach.call(e,function(e){e.remove()})},e.prototype.getChecked=function(){for(var e=[],t=[],s=[],i=0;i<this.checkboxes_.length;i++)t=this.checkboxes_[i].FieloFormElement.get("value"),t&&(e=$(this.checkboxes_[i]).closest("."+this.CssClasses_.ROW)[0].getAttribute(this.Constant_.RECORD_ID),s.push(e));return s},e.prototype.getPaginator=function(){return this.paginator_},e.prototype.init=function(){this.element_&&(componentHandler.upgradeElements(this.element_.getElementsByClassName(this.CssClasses_.OUTPUT)),this.model_=this.element_.getElementsByClassName(this.CssClasses_.MODEL)[0].cloneNode(!0)||null,this.extraFields_={},this.paginator_=this.element_.getElementsByClassName(this.CssClasses_.PAGINATOR)[0],this.paginator_.FieloPaginator.callback=this.renderRecords_.bind(this),this.async_=this.element_.getAttribute(this.Constant_.ASYNC),"true"===this.async_&&(this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords()),this.selectAllCheckbox_=this.element_.getElementsByClassName(this.CssClasses_.CHECKBOXALL)[0],this.checkboxes_=this.element_.getElementsByClassName(this.CssClasses_.CHECKBOXES),this.selectAllCheckbox_&&this.selectAllCheckbox_.addEventListener("change",this.checkOrUncheckAll_.bind(this)),this.bindHeaderActionsCallbacks_())},fielo.helper.register({constructor:e,classAsString:"FieloRecentRecords",cssClass:"fielosf-recent-records",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.FieloRelatedRecords=e,e.prototype.Constant_={ACTION:"data-action",ASYNC:"data-async",FIELD:"data-field",MODEL:".slds-table tbody",NAME:"data-name",PARAMETERS:"data-parameters",RECORD_ID:"data-record-id",SHOW:"data-aljs-show",TYPE:"data-type",UPGRADED:"data-upgraded",QTY_CONTROLLER:"FieloPLT.RelatedListController.getRecordsQty"},e.prototype.CssClasses_={BUTTON:"slds-button",CONTAINER:"fielosf-related-records__container",OUTPUT:"fielosf-output",HIDE:"slds-hide",MODEL:"fielosf-related-records__model",PAGINATOR:"fielosf-paginator",SIZE:"fielosf-related-records__size",ELEMENT:"slds-form-element"},e.prototype.renderRecords_=function(e){if(this.model_){var t=this.element_.getElementsByClassName(this.CssClasses_.CONTAINER)[0]||null;t.innerHTML="",e.forEach(function(e){var s=this.model_.cloneNode(!0);s.classList.remove(this.CssClasses_.HIDE),[].forEach.call(s.getElementsByClassName(this.CssClasses_.OUTPUT),function(t){var s,i=t.getAttribute(this.Constant_.FIELD).split("."),n=i.length>1;switch(n&&(s=i.slice(),s[i.length-1]="Id"),t.removeAttribute("data-upgraded"),componentHandler.upgradeElement(t),t.FieloOutput.set(fielo.util.getObjectValue(e,i)),t.getAttribute(this.Constant_.TYPE).toLowerCase()){case"link":case"reference":n?t.setAttribute("href","/"+fielo.util.getObjectValue(e,s)):t.setAttribute("href","/"+e.Id);break;case"action":[].forEach.call(t.getElementsByClassName(this.CssClasses_.BUTTON),function(){},this)}},this),[].forEach.call(s.getElementsByClassName("slds-button"),function(t){t.setAttribute("data-record",JSON.stringify(e))},this),[].forEach.call(s.querySelectorAll("["+this.Constant_.UPGRADED+"]"),function(t){t.removeAttribute(this.Constant_.UPGRADED),null!==t.getAttribute(this.Constant_.RECORD_ID)&&t.setAttribute(this.Constant_.RECORD_ID,e.Id);var s=t.getAttribute(this.Constant_.PARAMETERS);null!==s&&(s=""===s?{}:JSON.parse(s),s.Id=e.Id,s=JSON.stringify(s),t.setAttribute(this.Constant_.PARAMETERS,s)),componentHandler.upgradeElement(t)},this),s.classList.remove(this.CssClasses_.HIDE),t.appendChild(s)},this)}this.bindActionsCallbacks_(),this.renderCallback_(),fielo.util.spinner.FieloSpinner.hide()},e.prototype.renderCallback_=function(){},e.prototype.reload_=function(){this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords(),this.callbacks_.length>0&&this.callbacks_.forEach(function(e){e()})},e.prototype.bindActionsCallbacks_=function(){[].forEach.call(this.element_.querySelectorAll("."+this.CssClasses_.BUTTON+"["+this.Constant_.ACTION+"]"),function(e){if("true"===this.async_){var t=e.getAttribute("data-vis-field"),s=e.getAttribute("data-vis-value");if(t&&s){var i=JSON.parse(e.getAttribute("data-record")||"{}");i[t]&&i[t]!==s&&(e.classList.add("slds-hide"),e.classList.add("page-settings-btn"))}}!e.FieloButton.type_||"Remote"!==e.FieloButton.type_&&"RemoteList"!==e.FieloButton.type_?"Modal"===e.FieloButton.type_&&(document.getElementById(e.getAttribute(this.Constant_.SHOW)).FieloForm.callback=this.reload_.bind(this)):e.FieloButton.callback=this.reload_.bind(this)},this)},e.prototype.registerCallback=function(e){this.callbacks_.push(e)},e.prototype.setQuantityRecords=function(e){console.log(e)},e.prototype.init=function(){this.element_&&(componentHandler.upgradeElements(this.element_.getElementsByClassName(this.CssClasses_.OUTPUT)),this.model_=this.element_.getElementsByClassName(this.CssClasses_.MODEL)[0].cloneNode(!0)||null,this.paginator_=this.element_.getElementsByClassName(this.CssClasses_.PAGINATOR)[0],this.paginator_.FieloPaginator.callback=this.renderRecords_.bind(this),this.async_=this.element_.getAttribute(this.Constant_.ASYNC),"true"===this.async_&&(this.paginator_.FieloPaginator.setPage(),this.paginator_.FieloPaginator.getRecords()),this.sizeCount_=this.element_.getElementsByClassName(this.CssClasses_.SIZE)[0]||null,this.bindActionsCallbacks_(),this.callbacks_=[])},fielo.helper.register({constructor:e,classAsString:"FieloRelatedRecords",cssClass:"fielosf-related-records",widget:!0})}();
//# sourceMappingURL=core.min.js.map
